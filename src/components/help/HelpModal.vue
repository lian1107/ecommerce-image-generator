<script setup lang="ts">
import BaseModal from '@/components/common/BaseModal.vue'
import CollapseSection from '@/components/common/CollapseSection.vue'

defineProps<{
  visible: boolean
}>()

const emit = defineEmits<{
  'update:visible': [value: boolean]
}>()

const closeModal = () => {
  emit('update:visible', false)
}

// ç‰ˆæœ¬ä¿¡æ¯
const version = '1.0.0'
const buildDate = '2026-01-22'
</script>

<template>
  <BaseModal
    :visible="visible"
    title="â“ å¸®åŠ©ä¸­å¿ƒ"
    width="560px"
    :show-footer="true"
    @update:visible="emit('update:visible', $event)"
  >
    <div class="help-content">
      <!-- å¿«é€Ÿå…¥é—¨ -->
      <CollapseSection title="ğŸš€ å¿«é€Ÿå…¥é—¨" icon="" :default-open="true">
        <div class="help-section">
          <p class="help-intro">æ¬¢è¿ä½¿ç”¨ç”µå•†æ™ºèƒ½ç”Ÿå›¾ç³»ç»Ÿï¼åªéœ€ 3 æ­¥å³å¯ç”Ÿæˆä¸“ä¸šç”µå•†å›¾ç‰‡ï¼š</p>
          <ol class="help-steps">
            <li><strong>é…ç½® API</strong>ï¼šç‚¹å‡»å³ä¸Šè§’ã€Œâš™ï¸ System Settingsã€ï¼Œè¾“å…¥æ‚¨çš„ API Key</li>
            <li><strong>ä¸Šä¼ å•†å“å›¾</strong>ï¼šåœ¨æ§åˆ¶é¢æ¿ä¸Šä¼ æ‚¨çš„å•†å“å›¾ç‰‡</li>
            <li><strong>é€‰æ‹©åœºæ™¯ç”Ÿæˆ</strong>ï¼šé€‰æ‹©åœºæ™¯ç±»å‹ï¼Œç‚¹å‡»ã€Œç”Ÿæˆã€æŒ‰é’®</li>
          </ol>
          <p class="help-tip">ğŸ’¡ æç¤ºï¼šé¦–æ¬¡ä½¿ç”¨å»ºè®®ä»ã€ŒğŸš€ å¿«é€Ÿç”Ÿæˆã€æ¨¡å¼å¼€å§‹ä½“éªŒ</p>
        </div>
      </CollapseSection>

      <!-- åŠŸèƒ½è¯´æ˜ -->
      <CollapseSection title="ğŸ“– åŠŸèƒ½è¯´æ˜" icon="">
        <div class="help-section">
          <!-- ç³»ç»Ÿæ¦‚è¿° -->
          <div class="feature-overview">
            <p class="overview-text">
              æœ¬ç³»ç»Ÿæ˜¯ä¸€ä¸ª <strong>AI Agents æ™ºèƒ½ç”Ÿå›¾åˆ›ä½œå¹³å°</strong>ï¼Œé€šè¿‡å¤šä¸ªä¸“ä¸š AI Agent ååŒå·¥ä½œï¼Œ
              ä¸ºæ‚¨ç”Ÿæˆé«˜è´¨é‡çš„ç”µå•†è¥é”€å›¾ç‰‡ã€‚
            </p>
          </div>

          <!-- ä¸‰ç§æ¨¡å¼è¯´æ˜ -->
          <div class="feature-group">
            <h4 class="group-title">ğŸ“Œ ä¸‰ç§åˆ›ä½œæ¨¡å¼</h4>

            <div class="feature-item">
              <h4>ğŸš€ å¿«é€Ÿç”Ÿæˆ</h4>
              <p>é€‚åˆå¿«é€Ÿå‡ºå›¾çš„è½»é‡æ¨¡å¼ã€‚ä¸Šä¼ å•†å“å›¾ç‰‡ï¼Œé€‰æ‹©é¢„è®¾åœºæ™¯ï¼Œä¸€é”®ç”Ÿæˆä¸“ä¸šç”µå•†å›¾ã€‚</p>
              <ul class="feature-details">
                <li>âœ¦ ä½¿ç”¨å·¦ä¾§ã€Œâš™ï¸ ç”Ÿæˆè®¾ç½®ã€æ§åˆ¶è¾“å‡ºæ•ˆæœ</li>
                <li>âœ¦ å¯è°ƒèŠ‚ï¼šç”Ÿæˆæ•°é‡ã€å›¾ç‰‡æ¯”ä¾‹ã€è´¨é‡ã€é£æ ¼ã€å…‰ç…§ç­‰</li>
              </ul>
            </div>

            <div class="feature-item">
              <h4>âœ¨ é«˜çº§ç”Ÿæˆ</h4>
              <p>æä¾›æ›´å¤šè‡ªå®šä¹‰é€‰é¡¹çš„è¿›é˜¶æ¨¡å¼ã€‚æ”¯æŒå¤šå›¾èåˆã€è‡ªå®šä¹‰æç¤ºè¯ã€ç²¾ç»†é£æ ¼è°ƒæ•´ã€‚</p>
              <ul class="feature-details">
                <li>âœ¦ åŒæ ·ä½¿ç”¨å·¦ä¾§ã€Œâš™ï¸ ç”Ÿæˆè®¾ç½®ã€æ§åˆ¶è¾“å‡º</li>
                <li>âœ¦ é¢å¤–æ”¯æŒï¼šå¤šå‚è€ƒå›¾ã€è‡ªå®šä¹‰ Promptã€é«˜çº§å‚æ•°å¾®è°ƒ</li>
              </ul>
            </div>

            <div class="feature-item">
              <h4>ğŸ“Š è¥é”€ä¼åˆ’</h4>
              <p>AI Agents é©±åŠ¨çš„å…¨æµç¨‹è¥é”€å·¥ä½œå°ã€‚å¤šä¸ªä¸“ä¸š Agent ååŒåˆ†æäº§å“ã€åˆ¶å®šç­–ç•¥ã€æ‰¹é‡ç”Ÿæˆè¥é”€ç´ æã€‚</p>
              <ul class="feature-details">
                <li>âœ¦ <strong>ç‹¬ç«‹çš„ç”Ÿæˆæµç¨‹</strong>ï¼šä¸ä½¿ç”¨å·¦ä¾§ã€Œç”Ÿæˆè®¾ç½®ã€é¢æ¿</li>
                <li>âœ¦ ç”± AI Agents æ ¹æ®è¥é”€ç­–ç•¥è‡ªåŠ¨è§„åˆ’å›¾ç‰‡å‚æ•°</li>
                <li>âœ¦ åŒ…å«ï¼šäº§å“åˆ†æ â†’ ç­–ç•¥åˆ¶å®š â†’ å†…å®¹ä¼åˆ’ â†’ æ‰¹é‡ç”Ÿæˆ</li>
              </ul>
            </div>
          </div>

          <!-- ç”Ÿæˆè®¾ç½®è¯´æ˜ -->
          <div class="feature-group">
            <h4 class="group-title">âš™ï¸ å…³äºã€Œç”Ÿæˆè®¾ç½®ã€é¢æ¿</h4>
            <div class="settings-info">
              <table class="settings-table">
                <thead>
                  <tr>
                    <th>æ¨¡å¼</th>
                    <th>æ˜¯å¦ä½¿ç”¨ç”Ÿæˆè®¾ç½®</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>ğŸš€ å¿«é€Ÿç”Ÿæˆ</td>
                    <td>âœ… ä½¿ç”¨ â€” æ‰‹åŠ¨è°ƒèŠ‚å‚æ•°</td>
                  </tr>
                  <tr>
                    <td>âœ¨ é«˜çº§ç”Ÿæˆ</td>
                    <td>âœ… ä½¿ç”¨ â€” æ‰‹åŠ¨è°ƒèŠ‚å‚æ•°</td>
                  </tr>
                  <tr>
                    <td>ğŸ“Š è¥é”€ä¼åˆ’</td>
                    <td>âŒ ä¸ä½¿ç”¨ â€” AI è‡ªåŠ¨è§„åˆ’</td>
                  </tr>
                </tbody>
              </table>
              <p class="settings-note">
                ğŸ’¡ è¥é”€ä¼åˆ’æ¨¡å¼ä¸‹ï¼ŒAI Agents ä¼šæ ¹æ®äº§å“ç‰¹æ€§å’Œè¥é”€ç­–ç•¥<strong>è‡ªåŠ¨å†³å®š</strong>æœ€ä½³çš„å›¾ç‰‡å‚æ•°ï¼Œ
                æ— éœ€æ‰‹åŠ¨é…ç½®ç”Ÿæˆè®¾ç½®ã€‚
              </p>
            </div>
          </div>
        </div>
      </CollapseSection>

      <!-- å¸¸è§é—®é¢˜ -->
      <CollapseSection title="â“ å¸¸è§é—®é¢˜" icon="">
        <div class="help-section faq-section">
          <div class="faq-item">
            <h4>Q: å¦‚ä½•è·å– API Keyï¼Ÿ</h4>
            <p>A: è¯·è®¿é—®å¯¹åº” AI æœåŠ¡å•†å®˜ç½‘æ³¨å†Œè´¦å·å¹¶è·å– API Keyï¼Œç„¶ååœ¨ç³»ç»Ÿè®¾ç½®ä¸­é…ç½®</p>
          </div>
          <div class="faq-item">
            <h4>Q: æ”¯æŒå“ªäº›å›¾ç‰‡æ ¼å¼ï¼Ÿ</h4>
            <p>A: æ”¯æŒ JPGã€PNGã€WebP æ ¼å¼ï¼Œå»ºè®®å›¾ç‰‡å°ºå¯¸ä¸è¶…è¿‡ 4096x4096</p>
          </div>
          <div class="faq-item">
            <h4>Q: ç”Ÿæˆå¤±è´¥æ€ä¹ˆåŠï¼Ÿ</h4>
            <p>A: è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œ API Key æ˜¯å¦æ­£ç¡®ï¼Œå¦‚é—®é¢˜æŒç»­è¯·è”ç³»æŠ€æœ¯æ”¯æŒ</p>
          </div>
          <div class="faq-item">
            <h4>Q: ç”Ÿæˆçš„å›¾ç‰‡å¯ä»¥å•†ç”¨å—ï¼Ÿ</h4>
            <p>A: è¯·éµå¾ªæ‰€ä½¿ç”¨ AI æœåŠ¡å•†çš„ä½¿ç”¨æ¡æ¬¾ï¼Œä¸åŒæœåŠ¡å•†æ”¿ç­–å¯èƒ½æœ‰æ‰€ä¸åŒ</p>
          </div>
        </div>
      </CollapseSection>

      <!-- è”ç³»æˆ‘ä»¬ -->
      <CollapseSection title="ğŸ“§ è”ç³»æˆ‘ä»¬" icon="">
        <div class="help-section contact-section">
          <div class="contact-item">
            <span class="contact-icon">ğŸ“§</span>
            <div class="contact-info">
              <span class="contact-label">æŠ€æœ¯æ”¯æŒé‚®ç®±</span>
              <a href="mailto:lianff1107@gmail.com" class="contact-value">lianff1107@gmail.com</a>
            </div>
          </div>
          <div class="contact-item">
            <span class="contact-icon">ğŸ’¬</span>
            <div class="contact-info">
              <span class="contact-label">å¾®ä¿¡å·</span>
              <span class="contact-value selectable">hzlian55</span>
            </div>
          </div>
        </div>
      </CollapseSection>

      <!-- å…³äº -->
      <CollapseSection title="ğŸ“‹ å…³äº" icon="">
        <div class="help-section about-section">
          <div class="about-item">
            <span class="about-label">ç‰ˆæœ¬å·</span>
            <span class="about-value">v{{ version }}</span>
          </div>
          <div class="about-item">
            <span class="about-label">æ›´æ–°æ—¥æœŸ</span>
            <span class="about-value">{{ buildDate }}</span>
          </div>
          <p class="about-desc">
            ç”µå•†æ™ºèƒ½ç”Ÿå›¾ç³»ç»Ÿæ˜¯ä¸€æ¬¾åŸºäº AI çš„ç”µå•†å›¾ç‰‡ç”Ÿæˆå·¥å…·ï¼Œå¸®åŠ©å•†å®¶å¿«é€Ÿåˆ›å»ºä¸“ä¸šçš„å•†å“å±•ç¤ºå›¾ç‰‡ã€‚
          </p>
        </div>
      </CollapseSection>
    </div>

    <!-- è‡ªå®šä¹‰ footer -->
    <template #footer>
      <div class="help-footer">
        <span class="help-footer-text">æ„Ÿè°¢æ‚¨ä½¿ç”¨ç”µå•†æ™ºèƒ½ç”Ÿå›¾ç³»ç»Ÿ â¤ï¸</span>
        <button class="help-close-btn" @click="closeModal">å…³é—­</button>
      </div>
    </template>
  </BaseModal>
</template>

<style scoped>
.help-content {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.help-section {
  font-size: 0.9rem;
  line-height: 1.6;
  color: var(--color-text-secondary);
}

.help-intro {
  margin: 0 0 0.75rem;
}

.help-steps {
  margin: 0;
  padding-left: 1.25rem;
}

.help-steps li {
  margin-bottom: 0.5rem;
}

.help-steps li:last-child {
  margin-bottom: 0;
}

.help-tip {
  margin: 0.75rem 0 0;
  padding: 0.5rem 0.75rem;
  background: var(--color-info-bg, #eff6ff);
  border-radius: var(--radius-sm);
  font-size: 0.85rem;
  color: var(--color-info, #3b82f6);
}

/* åŠŸèƒ½è¯´æ˜ - æ¦‚è¿° */
.feature-overview {
  margin-bottom: 1.25rem;
  padding: 0.75rem 1rem;
  background: linear-gradient(135deg, var(--color-primary-bg, #f0f9ff) 0%, var(--color-info-bg, #eff6ff) 100%);
  border-radius: var(--radius-md);
  border-left: 3px solid var(--color-primary);
}

.overview-text {
  margin: 0;
  line-height: 1.6;
}

/* åŠŸèƒ½è¯´æ˜ - åˆ†ç»„ */
.feature-group {
  margin-bottom: 1.5rem;
}

.feature-group:last-child {
  margin-bottom: 0;
}

.group-title {
  margin: 0 0 0.75rem;
  padding-bottom: 0.5rem;
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--color-text);
  border-bottom: 1px solid var(--color-border);
}

/* åŠŸèƒ½è¯´æ˜ - æ¨¡å¼é¡¹ */
.feature-item {
  margin-bottom: 1rem;
  padding: 0.75rem;
  background: var(--color-bg-card);
  border-radius: var(--radius-sm);
  border: 1px solid var(--color-border);
}

.feature-item:last-child {
  margin-bottom: 0;
}

.feature-item h4 {
  margin: 0 0 0.5rem;
  font-size: 0.95rem;
  color: var(--color-text);
}

.feature-item > p {
  margin: 0 0 0.5rem;
}

.feature-details {
  margin: 0;
  padding-left: 1rem;
  list-style: none;
}

.feature-details li {
  margin-bottom: 0.25rem;
  font-size: 0.85rem;
  color: var(--color-text-muted);
}

.feature-details li:last-child {
  margin-bottom: 0;
}

/* åŠŸèƒ½è¯´æ˜ - è®¾ç½®è¡¨æ ¼ */
.settings-info {
  padding: 0.75rem;
  background: var(--color-bg-card);
  border-radius: var(--radius-sm);
  border: 1px solid var(--color-border);
}

.settings-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.85rem;
  margin-bottom: 0.75rem;
}

.settings-table th,
.settings-table td {
  padding: 0.5rem 0.75rem;
  text-align: left;
  border-bottom: 1px solid var(--color-border);
}

.settings-table th {
  background: var(--color-bg-hover);
  font-weight: 600;
  font-size: 0.8rem;
  text-transform: uppercase;
  letter-spacing: 0.02em;
}

.settings-table tbody tr:last-child td {
  border-bottom: none;
}

.settings-note {
  margin: 0;
  padding: 0.5rem 0.75rem;
  background: var(--color-warning-bg, #fffbeb);
  border-radius: var(--radius-sm);
  font-size: 0.85rem;
  color: var(--color-warning-text, #92400e);
}

/* FAQ */
.faq-section {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.faq-item h4 {
  margin: 0 0 0.25rem;
  font-size: 0.9rem;
  color: var(--color-text);
  font-weight: 600;
}

.faq-item p {
  margin: 0;
  padding-left: 1rem;
}

/* è”ç³»æ–¹å¼ */
.contact-section {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.contact-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem;
  background: var(--color-bg-secondary);
  border-radius: var(--radius-md);
}

.contact-icon {
  font-size: 1.5rem;
}

.contact-info {
  display: flex;
  flex-direction: column;
  gap: 0.125rem;
}

.contact-label {
  font-size: 0.8rem;
  color: var(--color-text-muted);
}

.contact-value {
  font-size: 0.95rem;
  color: var(--color-text);
  font-weight: 500;
}

.contact-value.selectable {
  user-select: all;
  cursor: text;
}

a.contact-value {
  color: var(--color-primary);
  text-decoration: none;
}

a.contact-value:hover {
  text-decoration: underline;
}

/* å…³äº */
.about-section {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.about-item {
  display: flex;
  justify-content: space-between;
  padding: 0.5rem 0;
  border-bottom: 1px solid var(--color-border-light);
}

.about-label {
  color: var(--color-text-muted);
}

.about-value {
  font-weight: 500;
  color: var(--color-text);
}

.about-desc {
  margin: 0.5rem 0 0;
  font-size: 0.85rem;
}

/* Footer */
.help-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 1rem 1.25rem;
  border-top: 1px solid var(--color-border);
  margin: 0 -1.25rem -1.25rem;
  background: var(--color-bg-secondary);
}

.help-footer-text {
  font-size: 0.85rem;
  color: var(--color-text-muted);
}

.help-close-btn {
  padding: 0.5rem 1.25rem;
  background: var(--color-primary);
  color: white;
  border: none;
  border-radius: var(--radius-md);
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
}

.help-close-btn:hover {
  background: var(--color-primary-dark);
}

/* ç§»åŠ¨ç«¯é€‚é… */
@media (max-width: 640px) {
  .help-section {
    font-size: 0.85rem;
  }

  .contact-item {
    padding: 0.625rem;
  }

  .contact-icon {
    font-size: 1.25rem;
  }

  .help-footer {
    flex-direction: column;
    gap: 0.75rem;
    text-align: center;
  }

  .help-close-btn {
    width: 100%;
  }
}
</style>

